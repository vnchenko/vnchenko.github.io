(function(e){function t(t){for(var o,s,c=t[0],a=t[1],l=t[2],u=0,h=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,c=1;c<n.length;c++){var a=n[c];0!==i[a]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={app:0},r=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=a;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("85ec"),i=n.n(o);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"app"}},[n("canvas",{ref:"threejs",staticClass:"threejs",class:e.grabbing})]),n("div",{ref:"productoverlay",attrs:{id:"product-overlay"},on:{click:this.removeProductInfoOverlay}},[n("h3",[e._v("Name: "+e._s(this.selectedProductInfo.name))]),n("h3",[e._v("Zoomed scale: "+e._s(this.selectedProductInfo.zoomedScale))]),n("h3",[e._v("Far scale: "+e._s(this.selectedProductInfo.farScale))]),n("a",[e._v(e._s(this.selectedProductInfo.link))])])])},r=[],s=(n("4de4"),n("7db0"),n("4160"),n("caad"),n("b0c0"),n("07ac"),n("2532"),n("159b"),n("5a89")),c=n("34ad"),a=n("8710"),l=n("4721"),d={1:[{name:"STEP2.jpg",step:2,position:{x:28,y:-3,z:-3.5}},{name:"STEP3.jpg",step:3,position:{x:28,y:-4,z:22}}],2:[{name:"STEP1.jpg",step:1,position:{x:-28,y:-3,z:3}},{name:"STEP3.jpg",step:3,position:{x:-12,y:-6,z:40}}],3:[{name:"STEP1.jpg",step:1,position:{x:-30,y:-4,z:-25}},{name:"STEP2.jpg",step:2,position:{x:15,y:-7,z:-50}}]},u=[{name:"STEP1.jpg",step:1,productSlots:[{x:70,y:-5,z:2},{x:50,y:-5,z:4},{x:15,y:-1,z:5}]},{name:"STEP2.jpg",step:2,productSlots:[{x:7,y:-5,z:15},{x:5,y:-5,z:11},{x:15,y:-5,z:12}]},{name:"STEP3.jpg",step:3,productSlots:[{x:7,y:-5,z:-15},{x:5,y:-5,z:-11},{x:15,y:-5,z:-12}]}],h=[{url:"/8afb282373834deda783f685c450f4c9.glb",productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink1",zoomedScale:3,farScale:5}},{url:"/8afb282373834deda783f685c450f4c9.glb",productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink3",zoomedScale:1,farScale:10}}],f={name:"App",data:function(){return{backgroundSrc:"STEP3.jpg",step:3,scene:null,camera:null,renderer:null,loader:null,controls:null,light:null,raycaster:[],mouse:null,envConfig:d,stepConfig:u,controlledObject:null,mouseX:0,mouseY:0,grabbing:"",backgroundSphere:null,objects:[],selectedProductInfo:{name:null,link:null}}},methods:{init:function(){var e=this;this.scene=new s["mb"];var t=window.innerWidth/window.innerHeight,n=new s["cb"](75,t,.1,1e4);n.position.x=1,n.lookAt(1,0,4),this.camera=n,this.declareRenderer();var o=new l["a"](this.camera,this.renderer.domElement);o.enableZoom=!1;var i=new s["Ab"],r=new s["kb"],a=[o,i,r];this.controls=a[0],this.mouse=a[1],this.raycaster=a[2],this.addLight();var d=new c["a"];this.loader=d;var u={x:1e4,y:1e4,z:1e4};h.forEach((function(t,n){return e.loadGLBObject(t,u,n)})),this.renderShowroom(),this.addAxesHelpers(),this.renderer.domElement.addEventListener("click",this.onDocumentMouseClick,!1),this.renderer.domElement.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("resize",this.onWindowResize,!1)},loadGLBObject:function(e,t,n){var o=this;this.loader.load(e.url,(function(i){i.scene.position.set(t.x,t.y,t.z),i.scene.productInfo=e.productInfo;var r=e.productInfo.farScale;i.scene.scale.set(r,r,r),o.scene.add(i.scene),o.objects[n]=i.scene,o.setObjectsPositions()}))},setMaxZoom:function(e){var t=(new s["f"]).setFromObject(e).getSize(new s["Bb"]),n=Math.max.apply(null,Object.values(t));this.controls.minDistance=n},addAxesHelpers:function(){var e=new s["d"](10);this.scene.add(e);var t=new s["Bb"](1,2,0);t.normalize();var n=new s["Bb"](0,0,0),o=1,i=16776960,r=new s["c"](t,n,o,i);this.scene.add(r)},addLight:function(){this.light=new s["db"](16777215,2,100),this.light.position.set(5,5,5),this.scene.add(this.light)},createMark:function(e){var t=e.name,n=e.position,o=new s["qb"](2,32,32),i=new s["S"]({color:16777215,opacity:1,transparent:!0}),r=new s["P"](o,i);r.name=t,r.position.x=n.x,r.position.y=n.y,r.position.z=n.z,this.scene.add(r)},renderShowroom:function(){var e=this,t=new s["wb"],n=t.load(this.backgroundSrc),o=new s["Q"]({map:n});o.side=s["n"];var i=new a["a"];if(this.backgroundSphere){var r=this.scene.getObjectByName("Sphere");r.traverse((function(e){e.isMesh&&(e.material=o)}))}else i.load("/SPHEREforIVANFBXCP.fbx",(function(t){t.traverse((function(e){e.isMesh&&(e.material=o)})),e.backgroundSphere=t,e.scene.add(t)}));this.setObjectsPositions(),d[this.step].forEach((function(t){return e.createMark(t)}))},flyTheObjectInTheMiddle:function(e){this.changeObjectPosition(e,{x:0,y:0,z:0});var t=e.productInfo.zoomedScale;e.scale.set(t,t,t)},showProductInfo:function(e){this.selectedProductInfo=e.productInfo,this.$refs.productoverlay.style.display="block"},removeProductInfoOverlay:function(){this.$refs.productoverlay.style.display="none"},setObjectsPositions:function(){var e=this,t=u.find((function(t){return t.step===e.step}));this.objects.forEach((function(n,o){e.changeObjectPosition(n,t.productSlots[o]);var i=n.productInfo.farScale;n.scale.set(i,i,i)}))},declareRenderer:function(){this.renderer=new s["Eb"]({antialias:!0,canvas:this.$refs.threejs}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(16777215)},changeBackground:function(e){var t=this;d[this.step].forEach((function(e){var n=t.scene.getObjectByName(e.name);t.scene.remove(n)})),this.backgroundSrc=e,this.step=u.find((function(t){return t.name===e})).step,this.renderShowroom()},changeObjectPosition:function(e,t){e.position.set(t.x,t.y,t.z)},animate:function(){requestAnimationFrame(this.animate),this.controls.update(),this.render()},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},onDocumentMouseClick:function(e){e.preventDefault(),this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.scene.children,!0),n=t.find((function(e){return e.object.name.includes("SF")})),o=t.find((function(e){return e.object.name.includes("STEP")}));this.setClickedObj(n),this.backgroundSphereClicked(o)},backgroundSphereClicked:function(e){void 0!=e&&(this.scene.remove(e.object.name),this.changeBackground(e.object.name))},setClickedObj:function(e){if(void 0!=e){var t=e.object.parent;this.flyTheObjectInTheMiddle(t),this.showProductInfo(t),this.controlledObject=t,this.grabbing="grabbing"}else this.resetObjXOrientation(this.controlledObject),this.resetObjYOrientation(this.controlledObject),this.removeProductInfoOverlay(),this.controlledObject=null,this.grabbing="",this.setObjectsPositions()},onMouseMove:function(e){e.preventDefault();var t=e.clientX-this.mouseX,n=e.clientY-this.mouseY;this.mouseX=e.clientX,this.mouseY=e.clientY,null!=this.controlledObject&&(this.controlledObject.rotation.y+=t/100,this.controlledObject.rotation.x+=n/100)},resetObjXOrientation:function(e){null!=e&&(e.rotation.x=0)},resetObjYOrientation:function(e){null!=e&&(e.rotation.y=0)},render:function(){this.renderer.render(this.scene,this.camera)},loadRemainingScenes:function(){var e=this,t=this.stepConfig.filter((function(t){return t.name!==e.backgroundSrc})),n=new s["wb"];t.forEach((function(e){return n.load(e.name)}))}},mounted:function(){this.init(),this.animate(),this.loadRemainingScenes()}},p=f,m=(n("034f"),n("2877")),b=Object(m["a"])(p,i,r,!1,null,null,null),v=b.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(v)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.ed359824.js.map