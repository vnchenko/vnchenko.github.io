(function(e){function t(t){for(var r,a,s=t[0],c=t[1],d=t[2],u=0,f=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"app"}},[n("canvas",{ref:"threejs",staticClass:"threejs",class:e.grabbing})]),n("div",{ref:"productoverlay",attrs:{id:"product-overlay"},on:{click:this.removeProductInfoOverlay}},[n("h3",[e._v("Name: "+e._s(this.selectedProductInfo.name))]),n("h3",[e._v("Zoomed scale: "+e._s(this.selectedProductInfo.zoomedScale))]),n("h3",[e._v("Far scale: "+e._s(this.selectedProductInfo.farScale))]),n("a",[e._v(e._s(this.selectedProductInfo.link))])])])},i=[],a=(n("4de4"),n("7db0"),n("4160"),n("caad"),n("b0c0"),n("07ac"),n("2532"),n("159b"),n("5a89")),s=n("34ad"),c=n("8710"),d=n("4721"),l={name:"Mobile phones showroom",description:"Test description",scenes:[{name:"Small Table close up",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP1.jpg",step:1,productSlots:[{id:1,coordinates:{x:70,y:-5,z:2},farScaleOverride:7,name:"table position 1"},{id:2,coordinates:{x:50,y:-5,z:4},farScaleOverride:5,name:"table position 2"},{id:3,coordinates:{x:15,y:-1,z:5},farScaleOverride:10,name:"table position 3"}],interactableScenes:[{name:"STEP2",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP2.jpg",step:2,position:{x:28,y:-3,z:-3.5}},{name:"STEP3.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP3.jpg",step:3,position:{x:28,y:-4,z:22}}]},{name:"Large table",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP2.jpg",step:2,productSlots:[{id:1,coordinates:{x:7,y:-5,z:15},farScaleOverride:5,name:"table position 1"},{id:2,coordinates:{x:5,y:-5,z:11},farScaleOverride:5,name:"table position 2"},{id:3,coordinates:{x:15,y:-5,z:12},farScaleOverride:5,name:"table position 3"}],interactableScenes:[{name:"STEP1.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP1.jpg",step:1,position:{x:-28,y:-3,z:3}},{name:"STEP3.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP3.jpg",step:3,position:{x:-12,y:-6,z:40}}]},{name:"3rd step",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP3.jpg",step:3,productSlots:[{id:1,coordinates:{x:7,y:-5,z:-15},farScaleOverride:6,name:"table position 1"},{id:2,coordinates:{x:5,y:-5,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:5,y:-5,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:5,y:-5,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:15,y:-50,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:5,y:-2,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:5,y:-3,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:5,y:-1,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:5,y:-5,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:2,y:-5,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:3,y:-5,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:4,y:-5,z:-11},farScaleOverride:20,name:"table position 2"},{id:2,coordinates:{x:51,y:-5,z:-11},farScaleOverride:20,name:"table position 2"},{id:3,coordinates:{x:15,y:-5,z:-12},farScaleOverride:10,name:"table position 3"}],interactableScenes:[{name:"STEP1.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP1.jpg",step:1,position:{x:-30,y:-4,z:-25}},{name:"STEP2.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP2.jpg",step:2,position:{x:15,y:-7,z:-50}}]}],products:[{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:1,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink1",zoomedScale:3,farScale:5}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:2,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:2,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:2,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:2,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:2,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:2,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:2,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:2,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:3,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink3",zoomedScale:1,farScale:10}}]},u={name:"App",data:function(){return{backgroundSrc:null,step:3,scene:null,camera:null,renderer:null,loader:null,controls:null,light:null,raycaster:[],mouse:null,controlledObject:null,mouseX:0,mouseY:0,grabbing:"",backgroundSphere:null,objects:[],selectedProductInfo:{name:null,link:null}}},methods:{init:function(){var e=this;this.scene=new a["mb"];var t=window.innerWidth/window.innerHeight,n=new a["cb"](75,t,.1,1e4);n.position.x=1,n.lookAt(1,0,4),this.camera=n,this.declareRenderer();var r=new d["a"](this.camera,this.renderer.domElement);r.enableZoom=!1;var o=new a["Ab"],i=new a["kb"],c=[r,o,i];this.controls=c[0],this.mouse=c[1],this.raycaster=c[2],this.addLight();var u=new s["a"];this.loader=u;var f={x:1e4,y:1e4,z:1e4};l.products.forEach((function(t,n){return e.loadGLBObject(t,f,n)})),this.backgroundSrc=this.getCurrentScene(l,this.step).url,this.renderShowroom(),this.addAxesHelpers(),this.renderer.domElement.addEventListener("click",this.onDocumentMouseClick,!1),this.renderer.domElement.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("resize",this.onWindowResize,!1)},loadGLBObject:function(e,t,n){var r=this;this.loader.load(e.url,(function(o){o.scene.position.set(t.x,t.y,t.z),o.scene.productInfo=e.productInfo,o.scene.productSlotId=e.productSlotId;var i=r.getProductFarScale(e,l,r.step);o.scene.scale.set(i,i,i),r.scene.add(o.scene),r.objects[n]=o.scene,r.setObjectsPositions()}))},setMaxZoom:function(e){var t=(new a["f"]).setFromObject(e).getSize(new a["Bb"]),n=Math.max.apply(null,Object.values(t));this.controls.minDistance=n},addAxesHelpers:function(){var e=new a["d"](10);this.scene.add(e);var t=new a["Bb"](1,2,0);t.normalize();var n=new a["Bb"](0,0,0),r=1,o=16776960,i=new a["c"](t,n,r,o);this.scene.add(i)},addLight:function(){this.light=new a["db"](16777215,2,100),this.light.position.set(5,5,5),this.scene.add(this.light)},createMark:function(e){var t=e.name,n=e.position,r=e.step,o=new a["qb"](2,32,32),i=new a["S"]({color:16777215,opacity:1,transparent:!0}),s=new a["P"](o,i);s.name=t,s.step=r,s.position.x=n.x,s.position.y=n.y,s.position.z=n.z,this.scene.add(s)},renderShowroom:function(){var e=this,t=new a["wb"],n=t.load(this.backgroundSrc),r=new a["Q"]({map:n});r.side=a["n"];var o=new c["a"];if(this.backgroundSphere){var i=this.scene.getObjectByName("Sphere");i.traverse((function(e){e.isMesh&&(e.material=r)}))}else o.load("/SPHEREforIVANFBXCP.fbx",(function(t){t.traverse((function(e){e.isMesh&&(e.material=r)})),e.backgroundSphere=t,e.scene.add(t)}));this.setObjectsPositions();var s=this.getCurrentScene(l,this.step);s.interactableScenes.forEach((function(t){return e.createMark(t)}))},flyTheObjectInTheMiddle:function(e){this.changeObjectPosition(e,{x:0,y:0,z:0});var t=e.productInfo.zoomedScale;e.scale.set(t,t,t)},showProductInfo:function(e){this.selectedProductInfo=e.productInfo,this.$refs.productoverlay.style.display="block"},getCurrentScene:function(e,t){return e.scenes.find((function(e){return e.step==t}))},getProductSlotForObj:function(e,t,n){return this.getCurrentScene(t,n).productSlots.find((function(t){return t.id==e.productSlotId}))},getProductFarScale:function(e,t,n){var r=e.productInfo.farScale,o=this.getProductSlotForObj(e,t,n),i=null;return i=o.farScaleOverride,i&&(r=i),r},removeProductInfoOverlay:function(){this.$refs.productoverlay.style.display="none"},setObjectsPositions:function(){var e=this,t=this.getCurrentScene(l,this.step);this.objects.forEach((function(n,r){e.changeObjectPosition(n,t.productSlots[r].coordinates);var o=e.getProductFarScale(n,l,e.step);n.scale.set(o,o,o)}))},declareRenderer:function(){this.renderer=new a["Eb"]({antialias:!0,canvas:this.$refs.threejs}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(16777215)},changeBackground:function(e){var t=this,n=this.getCurrentScene(l,this.step);n.interactableScenes.forEach((function(e){var n=t.scene.getObjectByName(e.name);t.scene.remove(n)}));var r=this.getCurrentScene(l,e.step);this.backgroundSrc=r.url,this.step=e.step,this.renderShowroom()},changeObjectPosition:function(e,t){e.position.set(t.x,t.y,t.z)},animate:function(){requestAnimationFrame(this.animate),this.controls.update(),this.render()},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},onDocumentMouseClick:function(e){e.preventDefault(),this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.scene.children,!0),n=t.find((function(e){return e.object.name.includes("SF")})),r=t.find((function(e){return e.object.name.includes("STEP")}));this.setClickedObj(n),this.backgroundSphereClicked(r)},backgroundSphereClicked:function(e){void 0!=e&&(this.scene.remove(e.object.name),this.changeBackground(e.object))},setClickedObj:function(e){if(void 0!=e){var t=e.object.parent;this.flyTheObjectInTheMiddle(t),this.showProductInfo(t),this.controlledObject=t,this.grabbing="grabbing"}else this.resetObjXOrientation(this.controlledObject),this.resetObjYOrientation(this.controlledObject),this.removeProductInfoOverlay(),this.controlledObject=null,this.grabbing="",this.setObjectsPositions()},onMouseMove:function(e){e.preventDefault();var t=e.clientX-this.mouseX,n=e.clientY-this.mouseY;this.mouseX=e.clientX,this.mouseY=e.clientY,null!=this.controlledObject&&(this.controlledObject.rotation.y+=t/100,this.controlledObject.rotation.x+=n/100)},resetObjXOrientation:function(e){null!=e&&(e.rotation.x=0)},resetObjYOrientation:function(e){null!=e&&(e.rotation.y=0)},render:function(){this.renderer.render(this.scene,this.camera)},loadRemainingScenes:function(){var e=this,t=l.scenes.filter((function(t){return t.step!==e.step})),n=new a["wb"];t.forEach((function(e){return n.load(e.name)}))}},mounted:function(){this.init(),this.animate(),this.loadRemainingScenes()}},f=u,p=(n("034f"),n("2877")),h=Object(p["a"])(f,o,i,!1,null,null,null),m=h.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(m)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.13e5b114.js.map