(function(e){function t(t){for(var r,s,a=t[0],c=t[1],l=t[2],u=0,f=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&f.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"app"}},[n("canvas",{ref:"threejs",staticClass:"threejs",class:e.grabbing})]),n("div",{ref:"productoverlay",attrs:{id:"product-overlay"},on:{click:this.removeProductInfoOverlay}},[n("h3",[e._v("Name: "+e._s(this.selectedProductInfo.name))]),n("h3",[e._v("Zoomed scale: "+e._s(this.selectedProductInfo.zoomedScale))]),n("h3",[e._v("Far scale: "+e._s(this.selectedProductInfo.farScale))]),n("a",[e._v(e._s(this.selectedProductInfo.link))])])])},i=[],s=(n("4de4"),n("7db0"),n("4160"),n("caad"),n("b0c0"),n("07ac"),n("2532"),n("159b"),n("5a89")),a=n("34ad"),c=n("8710"),l=n("4721"),d={name:"Mobile phones showroom",description:"Test description",scenes:[{name:"Small Table close up",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP1.jpg",step:1,productSlots:[{x:70,y:-5,z:2},{x:50,y:-5,z:4},{x:15,y:-1,z:5}],interactableScenes:[{name:"STEP2",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP2.jpg",step:2,position:{x:28,y:-3,z:-3.5}},{name:"STEP3.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP3.jpg",step:3,position:{x:28,y:-4,z:22}}]},{name:"Large table",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP2.jpg",step:2,productSlots:[{x:7,y:-5,z:15},{x:5,y:-5,z:11},{x:15,y:-5,z:12}],interactableScenes:[{name:"STEP1.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP1.jpg",step:1,position:{x:-28,y:-3,z:3}},{name:"STEP3.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP3.jpg",step:3,position:{x:-12,y:-6,z:40}}]},{name:"3rd step",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP3.jpg",step:3,productSlots:[{x:7,y:-5,z:-15},{x:5,y:-5,z:-11},{x:15,y:-5,z:-12}],interactableScenes:[{name:"STEP1.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP1.jpg",step:1,position:{x:-30,y:-4,z:-25}},{name:"STEP2.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP2.jpg",step:2,position:{x:15,y:-7,z:-50}}]}]},u=[{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:1,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink1",zoomedScale:3,farScale:5}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:1,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink1",zoomedScale:3,farScale:5}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:1,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink1",zoomedScale:3,farScale:5}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:1,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink1",zoomedScale:3,farScale:5}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:1,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink1",zoomedScale:3,farScale:5}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:1,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink1",zoomedScale:3,farScale:5}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:2,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink2",zoomedScale:2,farScale:8}},{url:"/8afb282373834deda783f685c450f4c9.glb",productSlotId:3,productInfo:{name:"Dachpfanne rot G10 PV",link:"someLink3",zoomedScale:1,farScale:10}}],f={name:"App",data:function(){return{backgroundSrc:null,step:3,scene:null,camera:null,renderer:null,loader:null,controls:null,light:null,raycaster:[],mouse:null,controlledObject:null,mouseX:0,mouseY:0,grabbing:"",backgroundSphere:null,objects:[],selectedProductInfo:{name:null,link:null}}},methods:{init:function(){var e=this;this.scene=new s["mb"];var t=window.innerWidth/window.innerHeight,n=new s["cb"](75,t,.1,1e4);n.position.x=1,n.lookAt(1,0,4),this.camera=n,this.declareRenderer();var r=new l["a"](this.camera,this.renderer.domElement);r.enableZoom=!1;var o=new s["Ab"],i=new s["kb"],c=[r,o,i];this.controls=c[0],this.mouse=c[1],this.raycaster=c[2],this.addLight();var f=new a["a"];this.loader=f;var h={x:1e4,y:1e4,z:1e4};u.forEach((function(t,n){return e.loadGLBObject(t,h,n)})),this.backgroundSrc=this.getCurrentScene(d,this.step).url,this.renderShowroom(),this.addAxesHelpers(),this.renderer.domElement.addEventListener("click",this.onDocumentMouseClick,!1),this.renderer.domElement.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("resize",this.onWindowResize,!1)},loadGLBObject:function(e,t,n){var r=this;this.loader.load(e.url,(function(o){o.scene.position.set(t.x,t.y,t.z),o.scene.productInfo=e.productInfo;var i=e.productInfo.farScale;o.scene.scale.set(i,i,i),r.scene.add(o.scene),r.objects[n]=o.scene,r.setObjectsPositions()}))},setMaxZoom:function(e){var t=(new s["f"]).setFromObject(e).getSize(new s["Bb"]),n=Math.max.apply(null,Object.values(t));this.controls.minDistance=n},addAxesHelpers:function(){var e=new s["d"](10);this.scene.add(e);var t=new s["Bb"](1,2,0);t.normalize();var n=new s["Bb"](0,0,0),r=1,o=16776960,i=new s["c"](t,n,r,o);this.scene.add(i)},addLight:function(){this.light=new s["db"](16777215,2,100),this.light.position.set(5,5,5),this.scene.add(this.light)},createMark:function(e){var t=e.name,n=e.position,r=e.step,o=new s["qb"](2,32,32),i=new s["S"]({color:16777215,opacity:1,transparent:!0}),a=new s["P"](o,i);a.name=t,a.step=r,a.position.x=n.x,a.position.y=n.y,a.position.z=n.z,this.scene.add(a)},renderShowroom:function(){var e=this,t=new s["wb"],n=t.load(this.backgroundSrc),r=new s["Q"]({map:n});r.side=s["n"];var o=new c["a"];if(this.backgroundSphere){var i=this.scene.getObjectByName("Sphere");i.traverse((function(e){e.isMesh&&(e.material=r)}))}else o.load("/SPHEREforIVANFBXCP.fbx",(function(t){t.traverse((function(e){e.isMesh&&(e.material=r)})),e.backgroundSphere=t,e.scene.add(t)}));this.setObjectsPositions();var a=this.getCurrentScene(d,this.step);a.interactableScenes.forEach((function(t){return e.createMark(t)}))},flyTheObjectInTheMiddle:function(e){this.changeObjectPosition(e,{x:0,y:0,z:0});var t=e.productInfo.zoomedScale;e.scale.set(t,t,t)},showProductInfo:function(e){this.selectedProductInfo=e.productInfo,this.$refs.productoverlay.style.display="block"},getCurrentScene:function(e,t){return e.scenes.find((function(e){return e.step==t}))},removeProductInfoOverlay:function(){this.$refs.productoverlay.style.display="none"},setObjectsPositions:function(){var e=this,t=this.getCurrentScene(d,this.step);this.objects.forEach((function(n,r){e.changeObjectPosition(n,t.productSlots[r]);var o=n.productInfo.farScale;n.scale.set(o,o,o)}))},declareRenderer:function(){this.renderer=new s["Eb"]({antialias:!0,canvas:this.$refs.threejs}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(16777215)},changeBackground:function(e){var t=this,n=this.getCurrentScene(d,this.step);n.interactableScenes.forEach((function(e){var n=t.scene.getObjectByName(e.name);t.scene.remove(n)}));var r=this.getCurrentScene(d,e.step);this.backgroundSrc=r.url,this.step=e.step,this.renderShowroom()},changeObjectPosition:function(e,t){e.position.set(t.x,t.y,t.z)},animate:function(){requestAnimationFrame(this.animate),this.controls.update(),this.render()},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},onDocumentMouseClick:function(e){e.preventDefault(),this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.scene.children,!0),n=t.find((function(e){return e.object.name.includes("SF")})),r=t.find((function(e){return e.object.name.includes("STEP")}));this.setClickedObj(n),this.backgroundSphereClicked(r)},backgroundSphereClicked:function(e){void 0!=e&&(this.scene.remove(e.object.name),this.changeBackground(e.object))},setClickedObj:function(e){if(void 0!=e){var t=e.object.parent;this.flyTheObjectInTheMiddle(t),this.showProductInfo(t),this.controlledObject=t,this.grabbing="grabbing"}else this.resetObjXOrientation(this.controlledObject),this.resetObjYOrientation(this.controlledObject),this.removeProductInfoOverlay(),this.controlledObject=null,this.grabbing="",this.setObjectsPositions()},onMouseMove:function(e){e.preventDefault();var t=e.clientX-this.mouseX,n=e.clientY-this.mouseY;this.mouseX=e.clientX,this.mouseY=e.clientY,null!=this.controlledObject&&(this.controlledObject.rotation.y+=t/100,this.controlledObject.rotation.x+=n/100)},resetObjXOrientation:function(e){null!=e&&(e.rotation.x=0)},resetObjYOrientation:function(e){null!=e&&(e.rotation.y=0)},render:function(){this.renderer.render(this.scene,this.camera)},loadRemainingScenes:function(){var e=this,t=d.scenes.filter((function(t){return t.step!==e.step})),n=new s["wb"];t.forEach((function(e){return n.load(e.name)}))}},mounted:function(){this.init(),this.animate(),this.loadRemainingScenes()}},h=f,p=(n("034f"),n("2877")),m=Object(p["a"])(h,o,i,!1,null,null,null),b=m.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(b)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.39ed6442.js.map