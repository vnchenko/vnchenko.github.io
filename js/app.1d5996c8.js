(function(e){function t(t){for(var r,s,a=t[0],c=t[1],l=t[2],d=0,p=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),o=n.n(r);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.passwordCheck?n("div",{attrs:{id:"app"}},[n("canvas",{ref:"threejs",staticClass:"threejs",class:e.grabbing})]):e._e(),n("div",{ref:"productoverlay",attrs:{id:"product-overlay"},on:{click:this.overlayClicked}},[n("h3",[e._v("Name: "+e._s(this.selectedProductInfo.name))]),n("h3",[e._v("Zoomed scale: "+e._s(this.selectedProductInfo.zoomedScale))]),n("h3",[e._v("Far scale: "+e._s(this.selectedProductInfo.farScale))]),n("a",[e._v(e._s(this.selectedProductInfo.link))])])])},i=[],s=(n("7db0"),n("4160"),n("caad"),n("b0c0"),n("2532"),n("159b"),n("3835")),a=n("5a89"),c=n("34ad"),l=n("4721"),u={name:"Mobile phones showroom",description:"Test description",scenes:[{name:"Small Table close up",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP1.jpg",step:1,productSlots:[{id:1,coordinates:{x:70,y:-5,z:2},name:"table position 1"},{id:2,coordinates:{x:50,y:-5,z:4},name:"table position 2"},{id:3,coordinates:{x:15,y:-1,z:5},name:"table position 3"}],interactableScenes:[{name:"STEP2",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP2.jpg",step:2,position:{x:28,y:-3,z:-3.5}},{name:"STEP3.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP3.jpg",step:3,position:{x:28,y:-4,z:22}}]},{name:"Large table",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP2.jpg",step:2,productSlots:[{id:1,coordinates:{x:7,y:-5,z:15},name:"table position 1"},{id:2,coordinates:{x:5,y:-5,z:11},name:"table position 2"},{id:3,coordinates:{x:15,y:-5,z:12},name:"table position 3"}],interactableScenes:[{name:"STEP1.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP1.jpg",step:1,position:{x:-28,y:-3,z:3}},{name:"STEP3.jpg",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP3.jpg",step:3,position:{x:-12,y:-6,z:40}}]},{name:"3rd step",url:"https://virtrex-vtf-files.ams3.digitaloceanspaces.com/seeder/STEP3.jpg",step:3,productSlots:[{id:1,coordinates:{x:7,y:-5,z:-15},name:"table position 1"},{id:3,coordinates:{x:15,y:-5,z:-12},name:"table position 3"}],interactableScenes:[]}],products:[{url:"https://scbl3dcloud.azureedge.net/98efaeaf-3c08-4b5a-9248-d1109f224001/5374cc104ccc46e3af7700a31f8b9401/fd23dec903a64f439170036176210ab4.glb",productSlotId:1,productInfo:{name:"GIRA - Schalter mit Display",link:"someLink1",zoomedScale:3,farScale:20}},{url:"https://scbl3dcloud.azureedge.net/98efaeaf-3c08-4b5a-9248-d1109f224001/169b0a93ee074e87bf2f3d7085d06e18/a32b15ff514b4452b354994702764155.glb",productSlotId:3,productInfo:{name:"GIRA - Flächenschalter, Feinweiß 0188112",link:"someLink3",zoomedScale:1,farScale:20}}]},d=(n("4de4"),n("07ac"),function(e,t){return e.scenes.find((function(e){return e.step==t}))}),p=function(e,t,n){return d(t,n).productSlots.find((function(t){return t.id==e.productSlotId}))},f=function(e,t,n){var r=e.productInfo.farScale,o=p(e,t,n),i=o.farScaleOverride;return i||r},h=function(e,t,n,r,o,i,s,a){o.load(t.url,(function(o){o.scene.position.set(n.x,n.y,n.z),o.scene.productInfo=t.productInfo,o.scene.productSlotId=t.productSlotId;var c=f(t,e,i);o.scene.scale.set(c,c,c),s.add(o.scene),a[r]=o.scene,S(e,a,i)}))},m=function(e,t,n,r,o,i,s,a){if(r="",void 0!=t){var c=t.object.parent;console.log(t),g(c),o=w(c,i),n=c,r="grabbing"}else b(n),v(n),y(i),n=null,r="",S(e,s,a);return[n,r,o]},b=function(e){null!=e&&(e.rotation.x=0)},v=function(e){null!=e&&(e.rotation.y=0)},g=function(e){j(e,{x:0,y:0,z:0});var t=4;e.scale.set(t,t,t)},w=function(e,t){return t.style.display="block",e.productInfo},y=function(e){e.style.display="none"},S=function(e,t,n){var r=d(e,n);t.forEach((function(t,o){j(t,r.productSlots[o].coordinates);var i=f(t,e,n);t.scale.set(i,i,i)}))},j=function(e,t){e.position.set(t.x,t.y,t.z)},x=function(e){var t=new a["W"](16777215,2,100);t.position.set(5,5,5),e.add(t)},z=function(e,t){var n=t.name,r=t.position,o=t.step,i=new a["jb"](2,32,32),s=new a["L"]({color:16777215,opacity:1,transparent:!0}),c=new a["J"](i,s);c.name=n,c.step=o,c.position.x=r.x,c.position.y=r.y,c.position.z=r.z,e.add(c)},P=function(e){var t=new a["vb"]({antialias:!0,canvas:e});return t.setSize(window.innerWidth,window.innerHeight),t.setClearColor(16777215),t},k=function(e,t){var n=e.scenes.filter((function(e){return e.step!==t})),r=new a["ob"];n.forEach((function(e){return r.load(e.name)}))},E=function(e,t,n,r,o,i,s){var a=s;return void 0!=t&&(o.remove(t.object.name),a=O(e,t,n,r,o,i,s)),a},O=function(e,t,n,r,o,i,s){var a=d(e,s);a.interactableScenes.forEach((function(e){var t=o.getObjectByName(e.name);o.remove(t)}));var c=d(e,t.object.step);n=c.url;var l=t.object.step;return I(e,n,r,o,i,l),l},I=function(e,t,n,r,o,i){var s=new a["ob"],c=s.load(t,(function(){var e=new a["ub"](c.image.height);e.fromEquirectangularTexture(n,c),r.background=e}));S(e,o,i);var l=d(e,i);l.interactableScenes.forEach((function(e){return z(r,e)}))},T={name:"App",data:function(){return{backgroundSrc:null,step:3,scene:null,camera:null,renderer:null,loader:null,controls:null,light:null,raycaster:[],mouse:null,controlledObject:null,mouseX:0,mouseY:0,grabbing:"",backgroundSphere:null,objects:[],selectedProductInfo:{name:null,link:null}}},methods:{init:function(){var e=this;this.scene=new a["fb"];var t=window.innerWidth/window.innerHeight,n=new a["V"](75,t,.1,1e4);n.position.x=1,n.lookAt(1,0,4),this.camera=n,this.renderer=P(this.$refs.threejs);var r=new l["a"](this.camera,this.renderer.domElement);r.enableZoom=!1;var o=new a["rb"],i=new a["db"],s=[r,o,i];this.controls=s[0],this.mouse=s[1],this.raycaster=s[2],x(this.scene);var p=new c["a"];this.loader=p;var f={x:1e4,y:1e4,z:1e4};u.products.forEach((function(t,n){return h(u,t,f,n,e.loader,e.step,e.scene,e.objects,e.step)})),this.backgroundSrc=d(u,this.step).url,I(u,this.backgroundSrc,this.renderer,this.scene,this.objects,this.step),this.renderer.domElement.addEventListener("click",this.onDocumentMouseClick,!1),this.renderer.domElement.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("resize",this.onWindowResize,!1)},animate:function(){requestAnimationFrame(this.animate),this.controls.update(),this.render()},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},onDocumentMouseClick:function(e){e.preventDefault(),this.mouse.x=e.clientX/window.innerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.scene.children,!0);console.log(t);var n=t[0],r=t.find((function(e){return e.object.name.includes("STEP")})),o=m(u,n,this.controlledObject,this.grabbing,this.selectedProductInfo,this.$refs.productoverlay,this.objects,this.step),i=Object(s["a"])(o,3);this.controlledObject=i[0],this.grabbing=i[1],this.selectedProductInfo=i[2],this.step=E(u,r,this.backgroundSrc,this.renderer,this.scene,this.objects,this.step)},overlayClicked:function(){y(this.$refs.productoverlay)},onMouseMove:function(e){e.preventDefault();var t=e.clientX-this.mouseX,n=e.clientY-this.mouseY;this.mouseX=e.clientX,this.mouseY=e.clientY,null!=this.controlledObject&&(this.controlledObject.rotation.y+=t/100,this.controlledObject.rotation.x+=n/100)},render:function(){this.renderer.render(this.scene,this.camera)},passwordCheck:function(){var e="",t="virtrex";while(e!=t)e=prompt("Please enter the password:","");return!0}},mounted:function(){this.passwordCheck(),this.init(),this.animate(),k(u,this.step)}},_=T,M=(n("034f"),n("2877")),C=Object(M["a"])(_,o,i,!1,null,null,null),W=C.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(W)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.1d5996c8.js.map